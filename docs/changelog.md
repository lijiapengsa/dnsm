###  一、已知、待修复BUG
* 1、删除线路和区域时、需要判断是有有域名正在正在使用这个线路
* 2、删除域名时、需要判断该域名下是否有记录存在
* ~~3、记录管理需要重新设计、每条记录需要和view关联、以实现不同view中解析结果不同的功能~~ 已完成
* ~~4、添加zone（域名时）需要生成zone的记录文件名（hosts文件的位置需要使用）、方便后面record生成配置文件使用~~

### 二、待完成的功能
* ~~1、根据入库的数据、生成配置文件~~
* 2、支持前端定义TTL功能
* 3、域名管理页、点击域名直接跳转到该域名下的所有记录页、可新增、编辑、删除
* 4、每个页面都加入每行数据的创建时间和最后修改时间
* ~~5、新增一个zone的时候、需要指定一个默认的转发目标(自动生成一个`record`主机记录)、显示在"记录管理"页面（手动添加的记录依然是必填）（线上host配置文件的格式）~~
* 6、域名管理页、域名抽象一个分类出来、为方便适应内网多主机名类的解析造成的域名多、无法管理的场景
* 7、新增低5个功能后、在编辑域名的时候、如果修改了（新增或删除）域名的`生效区域`、则页需要更新`record`表、避免数据不同步
* ~~8、生成配置文件基本功能、和接口已经准备好。下一步需要设计一下、前端如何进行交互，生成配置文件、并同步到指定的服务器~~
* 9、`域名管理`页、需要搜索和过滤功能、主机的解析一旦添加、域名会很多
* ~~10、`DNS服务器`页、增加服务器初始化功能、负责初始化安装Bind9、和创建必要的目录（基本逻辑和前端页面流程已经完成）~~
* ~~11、服务初始化后端接口和前端已经完成、但是没有实现异步调用 （框架已经建立、并实现异步调用）~~
* 12、异步执行安装流程功能初步实现、实际的安装命令还需要调试
* ~~13、操作记录展示、服务器、bind具体的配置、记录和可视化展示~~
* 14、新增记录 dialog 、`所属域名` 需要过滤master域名、forward域名不应该显示（跟6功能类似）
* ~~15、利用gitlab、完成配置文件的同步~~
* 16、代码里面的引用需要配置化、现在是写死的、比如与gitlab同步的代码里面的gitlab地址、access token，与服务通信的私钥位置，SSO登录的端点地址。需要集中到配置文件里面、最好后端入库前端可配置化
### 三、功能备注
1、关于域名管理，为了减少肉眼所看到的域名数量、为每个域名添加了 `zone_from_view` 标签，来解释这个域名归属哪些区域。
但是这样造成的问题是我需要在代码里面多处将`zone`的记录文件按照固定格式临时生成（而不是从数据库取）；有一定的风险、否则就需要像Webmin那样的操作设计（日常操作复杂、有违本系统设计本意）。
> 在 /dnsm/apps/bind_configManager/generate_config.py 文件中 `generate_recordConf`, `generate_viewZoneConf` 两个方法使用字符串拼接的方式组成完整的文件名、用于生成配置文件

2、关于同步的的问题、可选择的方式有2种
> 全自动方式、即只添加配置即可、无需手动同步到服务器。
>
> 半自动方式、即添加配置后需要手动同步配置文件到每个服务器。具体应该如何实现需要商榷。

3、关于备份功能
> 调研过阿里云DNS的`数据备份`后、实际上是阿里云DNS的更多服务里面的一个功能、提供了备份和恢复的操作
>
> 无法猜测阿里云是利用什么技术进行的备份和恢复、如果有这个功能的必要性，需要具体设计一下如何备份以及恢复
>

4、关于配置文件同步方式
> 新方案、结合gitlab每次生成配置文件先推到gitlab仓库、每个服务器从gitlab拉取最新的配置
> 
> 待改造

5、操作日志
> 深入使用了`django-audit`模块之后发现、模块在记录表中记录的是对象ID（可以根据这个ID查资源名等属性）。
> __
> 但是在某条数据被删除时、根据ID就无法获取这个对象的属性了，也就是说当记录被删除时、修改的记录就会无法对应到具体的资源、也就无法正常显示操作日记
> 
> 有两个解决办法、
>
> ~~1、创建一个表、专门存放已经删除的记录、当在正常的库中无法查找到数据时到该库查询~~
>
> 2、当被修改的对象在数据表中被删除时、可以在操作表里面的删除记录中找到原信息
>
>
